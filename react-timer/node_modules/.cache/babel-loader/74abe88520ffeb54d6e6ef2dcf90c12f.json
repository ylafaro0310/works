{"ast":null,"code":"var _jsxFileName = \"/home/ylafaro/prog/react-timer/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport Timer from './Timer';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      startedTime: null,\n      // 開始時刻\n      nowTime: null,\n      // 現在時刻\n      setTime: 0,\n      // 設定時間(秒単位)\n      elapsedTime: 0,\n      // スタートが押されてからの経過時間(秒単位)\n      storeElapsedTime: 0,\n      // スタートが押される前までの経過時間(秒単位)\n      setIntervalId: null // setIntervalのid\n\n    };\n    this.countdown = this.countdown.bind(this);\n    this.onStart = this.onStart.bind(this);\n    this.onStop = this.onStop.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n    this.onChangeTime = this.onChangeTime.bind(this);\n  }\n\n  countdown() {\n    const {\n      setIntervalId,\n      startedTime,\n      setTime,\n      storeElapsedTime\n    } = this.state;\n    const nowTime = new Date();\n    const elapsedTime = Math.floor((nowTime - startedTime) / 1000);\n    const time = startedTime ? setTime - (elapsedTime + storeElapsedTime) : setTime;\n\n    if (time === 0) {\n      this.setState({\n        elapsedTime: elapsedTime\n      });\n      setTimeout(() => {\n        clearInterval(setIntervalId);\n        alert('時間になりました！');\n        this.setState({\n          startedTime: null,\n          elapsedTime: 0,\n          storeElapsedTime: 0,\n          setIntervalId: null\n        });\n      }, 10);\n    } else {\n      this.setState({\n        elapsedTime: elapsedTime\n      });\n    }\n  }\n\n  onStart() {\n    const id = setInterval(this.countdown, 1000);\n    const date = new Date();\n    this.setState({\n      startedTime: date,\n      setIntervalId: id\n    });\n  }\n\n  onStop(elapsedTime) {\n    const {\n      setIntervalId\n    } = this.state;\n    const date = new Date();\n    clearInterval(setIntervalId);\n    this.setState({\n      startedTime: date,\n      elapsedTime: 0,\n      storeElapsedTime: elapsedTime,\n      setIntervalId: null\n    });\n  }\n\n  onCancel() {\n    const {\n      setIntervalId\n    } = this.state;\n    clearInterval(setIntervalId);\n    this.setState({\n      startedTime: null,\n      elapsedTime: 0,\n      storeElapsedTime: 0,\n      setIntervalId: null\n    });\n  }\n\n  onChangeTime(sec) {\n    const {\n      setTime\n    } = this.state;\n\n    if (setTime + sec >= 0) {\n      this.setState({\n        setTime: setTime + sec\n      });\n    }\n  }\n\n  render() {\n    const {\n      setIntervalId,\n      startedTime,\n      setTime,\n      elapsedTime,\n      storeElapsedTime\n    } = this.state;\n    const progress = startedTime ? 100 - (elapsedTime + storeElapsedTime) / setTime * 100 : 100;\n    const time = startedTime ? setTime - (elapsedTime + storeElapsedTime) : setTime;\n    const text = String('00' + Math.floor(time / 3600)).slice(-2) + ':' + String('00' + Math.floor(time / 60) % 60).slice(-2) + ':' + String('0' + time % 60).slice(-2);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Timer, {\n      stroke: 5,\n      radius: 200,\n      progress: progress,\n      text: text,\n      onChangeTime: this.onChangeTime,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '120px'\n      },\n      className: 'button' + (startedTime ? '' : ' button-disabled'),\n      type: \"button\",\n      disabled: startedTime ? false : true,\n      onClick: this.onCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: 'button' + (setTime === 0 ? ' button-disabled' : ''),\n      type: \"button\",\n      onClick: setIntervalId ? () => {\n        this.onStop(elapsedTime + storeElapsedTime);\n      } : this.onStart,\n      disabled: setTime === 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, setIntervalId ? '停止' : '開始')));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/ylafaro/prog/react-timer/src/App.js"],"names":["React","Timer","App","Component","constructor","props","state","startedTime","nowTime","setTime","elapsedTime","storeElapsedTime","setIntervalId","countdown","bind","onStart","onStop","onCancel","onChangeTime","Date","Math","floor","time","setState","setTimeout","clearInterval","alert","id","setInterval","date","sec","render","progress","text","String","slice","marginRight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\n\nimport Timer from './Timer';\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      startedTime: null, // 開始時刻\n      nowTime: null, // 現在時刻\n      setTime: 0, // 設定時間(秒単位)\n      elapsedTime: 0, // スタートが押されてからの経過時間(秒単位)\n      storeElapsedTime: 0, // スタートが押される前までの経過時間(秒単位)\n      setIntervalId: null, // setIntervalのid\n    }\n\n    this.countdown = this.countdown.bind(this);\n    this.onStart = this.onStart.bind(this);\n    this.onStop = this.onStop.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n    this.onChangeTime = this.onChangeTime.bind(this);\n  }\n\n  countdown(){\n    const { setIntervalId, startedTime, setTime, storeElapsedTime} = this.state;\n    const nowTime = new Date();\n    const elapsedTime = Math.floor((nowTime - startedTime) / 1000);\n\n    const time = startedTime ? setTime - (elapsedTime + storeElapsedTime) : setTime;\n\n    if(time === 0){\n      this.setState({elapsedTime: elapsedTime});\n      setTimeout(()=>{\n        clearInterval(setIntervalId);\n        alert('時間になりました！');\n        this.setState({\n          startedTime: null,\n          elapsedTime: 0,\n          storeElapsedTime: 0,\n          setIntervalId: null,\n        });  \n      },10);\n    }else{\n      this.setState({\n        elapsedTime: elapsedTime\n      });\n    }\n  }\n\n  onStart(){\n    const id = setInterval(this.countdown,1000);\n    const date = new Date();\n    this.setState({\n      startedTime: date,\n      setIntervalId: id,\n    })\n  }\n\n  onStop(elapsedTime){\n    const { setIntervalId } = this.state;\n    const date = new Date();\n    clearInterval(setIntervalId);\n    this.setState({\n      startedTime: date,\n      elapsedTime: 0,\n      storeElapsedTime: elapsedTime,\n      setIntervalId: null\n    })\n  }\n\n  onCancel(){\n    const { setIntervalId } = this.state;\n    clearInterval(setIntervalId);\n\n    this.setState({\n      startedTime: null,\n      elapsedTime: 0,\n      storeElapsedTime: 0,\n      setIntervalId: null,\n    })\n  }\n\n  onChangeTime(sec){\n    const { setTime } = this.state;\n    if((setTime + sec) >= 0){\n      this.setState({setTime: setTime + sec});\n    }\n  }\n\n  render(){\n    const { setIntervalId, startedTime, setTime, elapsedTime, storeElapsedTime } = this.state;\n    const progress = startedTime ?  100 - ((elapsedTime + storeElapsedTime) / setTime * 100) : 100; \n    const time = startedTime ? setTime - (elapsedTime + storeElapsedTime) : setTime;\n    const text = String('00' + Math.floor(time / 3600)).slice(-2) + ':' + String('00' + Math.floor(time / 60) % 60).slice(-2) + ':' + String('0' + time % 60).slice(-2); \n\n    return (\n      <div className=\"App\">\n        <Timer \n          stroke={5}\n          radius={200}\n          progress={progress}\n          text={text}\n          onChangeTime={this.onChangeTime}\n        />\n        <div>\n          <button \n            style={{marginRight: '120px'}} \n            className={'button'+(startedTime ? '' : ' button-disabled')} \n            type='button' \n            disabled={startedTime ? false : true}\n            onClick={this.onCancel}\n            >\n              キャンセル\n          </button>\n          <button \n            className={'button'+(setTime === 0  ? ' button-disabled' : '')} \n            type='button'\n            onClick={setIntervalId ? ()=>{this.onStop(elapsedTime + storeElapsedTime)} : this.onStart}\n            disabled={setTime === 0}\n          >\n            {setIntervalId ? '停止' : '開始'}\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}